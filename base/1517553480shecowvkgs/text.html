<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">curl</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> sends POST requests with the default content type of </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">application/x-www-form-urlencoded</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">. If you want to send a json request, you will have to specify the correct content type header: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">$ curl -vX POST http://server/api/v1/places.json -d @testplace.json \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">--header &quot;Content-Type: application/json&quot; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">But that will only work if the server accepts json input. The </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">.json</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> at the end of the url may only indicate that the </span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-style:italic;">output</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> is json, it doesn't necessarily mean that it also will handle json </span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-style:italic;">input</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">. The API documentation should give you a hint wheather it does or not. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">The reason why you get a </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">401</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> and not some other error is probably because the server can't extract the </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">auth_token</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> from your request. </span></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="link-post-18614411"></a><a href="https://stackoverflow.com/a/18614411"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">s</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">hare</span><a href="https://stackoverflow.com/posts/18614411/edit"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">improve this answer</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p></td>
<td>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://stackoverflow.com/posts/18614411/revisions"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">edited Sep 4 '13 at 13:00</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p></td>
<td>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">answered Sep 4 '13 at 12:54 </span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image22944.png" /><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://stackoverflow.com/users/1350899/mata"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">mata</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">43k692117 </span></p></td></tr></table></body></html>