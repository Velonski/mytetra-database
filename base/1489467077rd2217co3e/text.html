<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-weight:600; color:#5460ab;">Monit</span><span style=" font-family:' FreeMono';"> — программа для поддержания сервисов на плаву, которая умеет слать уведомления в случае каких либо отклонений, софтина работает под linux, bsd и других unix-системах. Используется как средство мониторинга и перезапуска каких либо сервисов.  Гибкие настройки и функционал делают программу очень даже привлекательной!  Рекомендую к употреблению и добро пожаловать под кат.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-weight:600;">Monit</span><span style=" font-family:' FreeMono';"> умеет проверять:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">Существование процесса по PID.<br />Работу определенного порта (TCP/UDP).<br />Ответ определенного протокола по порту (SMTP, SSH, HTTP,MYSQL…).<br />Ресурсы, занимаемые процессом (CPU/RAM).<br />Объем и свободное пространство в файловой системе.<br />Права доступа к файлу или каталогу.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">В случае отклонений </span><span style=" font-family:' FreeMono'; font-weight:600;">monit</span><span style=" font-family:' FreeMono';"> может:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">Остановить, стартовать или перезапустить сервис.<br />Подождать определенное время.<br />Послать уведомление.<br />Примонтировать, отмонтировать файловую систему<br />Запустить отдельный скрипт и передать ему определенные параметры.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">Как видите функционал довольно таки серьезный, софтина есть практически во всех распространенных дистрибутивах Debian, CentOS, FreeBSD. Устанавливать в Debian будем из портов: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:' FreeMono'; font-size:12px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">Shell </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">aptitude install monit </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:' FreeMono'; font-size:12px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:-19px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><span style=" font-family:' FreeMono'; font-size:12px;">1 </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><a name="crayon-58c68da40ebd8248834381-1"></a><span style=" font-family:' FreeMono'; font-size:12px;">a</span><span style=" font-family:' FreeMono'; font-size:12px;">ptitude install monit</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">Готово? идем конфигугрировать, но перед этим я немного схитрю, поставилась у нас не самая свежая версия а мы хотим свежую с полным функционалом, идем на официальный сайт и качаем под свою ОС.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">http://mmonit.com/monit/download/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">берем из архива исполняемый файл monit и кладем его к себе в /usr/bin/monit с заменой =)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">Теперь можно настроить конфиг, документация http://mmonit.com/monit/documentation/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">Например можно настроить как то так:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">/etc/monit/monitrc </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:' FreeMono'; font-size:12px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">Shell </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">############################################################################### ## Monit конфигурационный файл ############################################################################### ## Запустить monit как депон и проверять процесс с интервалом 1 минута set daemon 60 # Использовать syslog регистрирующий со средством 'демона'. set logfile syslog facility log_daemon ## Список mailservers для доставки оповещения.По умолчанию это 25 порт. set mailserver localhost # primary mailserver set eventqueue basedir /var/log/monit # путь к каталогу, где будут храниться оповещения slots 100 # лимит ## Вы можете самостоятельно задать формат письма set mail-format { from: system-alert@host.com } #set alert sis@host.com # все оповещения set mmonit http://monit:password@IP:PORT/collector set httpd port 2800 and use address IP-SERVER allow admin:admin #Состояние сервера в целом check system serv.host.com group server if loadavg (15min) &gt; 10 then alert if loadavg (5min) &gt; 30 then alert if memory usage &gt; 90% then alert #Проверка apache2 check process apache2 with pidfile /var/run/apache2.pid group www start program = &quot;/etc/init.d/apache2 start&quot; stop program = &quot;/etc/init.d/apache2 stop&quot; if cpu &gt; 50% for 3 cycles then alert # если загрузка cpu &gt; 50% в течение 5 (проверок) послать предупреждение. if cpu &gt; 90% for 3 cycles then restart # если загрузка cpu &gt; 90% в течение 3 циклов то послать перезапустить процесс. if totalmem &gt; 4000.0 MB for 3 cycles then restart # если юзается больше 600 MB мозгов то перезапустить процесс. if children &gt; 200 then restart # если число дочерних процессов &gt; 50 то перезапустить процесс. if failed host IP_ADDR port 80 protocol HTTP then restart # передернуть если не отвечает. if 5 restarts within 5 cycles then timeout # если 5 раз уже перезапускали процесс то сделать timeout. #Проверка nginx check process nginx with pidfile /var/run/nginx.pid group www start program = &quot;/etc/init.d/nginx start&quot; stop program = &quot;/etc/init.d/nginx stop&quot; if cpu &gt; 50% for 3 cycles then alert # если загрузка cpu &gt; 50% в течение 3 (проверок) послать предупреждение. if cpu &gt; 90% for 5 cycles then restart # если загрузка cpu &gt; 80% 6 циклов то послать перезапустить процесс. if totalmem &gt; 1200.0 MB for 3 cycles then restart # если юзается больше 200 MB мозгов то перезапустить процесс. if children &gt; 10 then restart # если число дочерних процессов &gt; 5 то перезапустить процесс. #Проверка dovecot check process dovecot with pidfile /var/run/dovecot/master.pid start program = &quot;/etc/init.d/dovecot start&quot; stop program = &quot;/etc/init.d/dovecot stop&quot; if cpu &gt; 50% for 3 cycles then alert if cpu &gt; 90% for 5 cycles then restart if totalmem &gt; 400.0 MB for 5 cycles then restart if children &gt; 40 then restart if failed port 110 type TCP protocol POP then restart if 5 restarts within 5 cycles then timeout #Проверка exim check process exim with pidfile /var/run/exim4/exim.pid start program = &quot;/etc/init.d/exim4 start&quot; stop program = &quot;/etc/init.d/exim4 stop&quot; if cpu &gt; 50% for 3 cycles then alert if cpu &gt; 90% for 5 cycles then restart if children &gt; 30 then restart #if failed port 25 protocol smtp then restart if 5 restarts within 5 cycles then timeout #Проверка mysql check process mysql with pidfile /var/run/mysqld/mysqld.pid group www start program = &quot;/etc/init.d/mysql start&quot; stop program = &quot;/etc/init.d/mysql stop&quot; if failed unixsocket /var/run/mysqld/mysqld.sock then restart #if failed host 127.0.0.1 port 3306 protocol mysql then restart if 5 restarts within 5 cycles then timeout #Проверка SSH check process sshd with pidfile /var/run/sshd.pid start program &quot;/etc/init.d/ssh start&quot; stop program &quot;/etc/init.d/ssh stop&quot; if failed host IP_ADDR port 22 protocol ssh then restart if 5 restarts within 5 cycles then timeout #Проверка fail2ban # check process fail2ban with pidfile /var/run/fail2ban/fail2ban.pid # start program = &quot;/etc/init.d/fail2ban start&quot; # stop program = &quot;/etc/init.d/fail2ban stop&quot; # if 5 restarts within 5 cycles then timeout # проверяем устройство по точке монтирования. check device rootfs with path / if failed permission 755 then alert if space usage &gt; 90% for 5 times within 10 cycles then alert if inode usage &gt; 90% for 5 times within 10 cycles then alert group server # проверяем устройство по точке монтирования. check device varfs with path /var if failed permission 0755 then alert if space usage &gt; 90% for 5 times within 10 cycles then alert if inode usage &gt; 90% for 5 times within 10 cycles then alert group server # проверяем устройство по точке монтирования. check device tmpfs with path /tmp if failed permission 1777 then alert if space usage &gt; 90% for 5 times within 10 cycles then alert if inode usage &gt; 90% for 5 times within 10 cycles then alert group server </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:' FreeMono'; font-size:12px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:-35px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><span style=" font-family:' FreeMono'; font-size:12px;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">7</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">10</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">11</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">12</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">13</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">14</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">15</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">16</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">17</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">18</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">19</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">20</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">21</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">22</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">23</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">24</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">25</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">26</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">27</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">28</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">29</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">30</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">31</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">32</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">33</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">34</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">35</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">36</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">37</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">38</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">39</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">40</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">41</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">42</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">43</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">44</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">45</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">46</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">47</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">48</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">49</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">50</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">51</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">52</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">53</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">54</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">55</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">56</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">57</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">58</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">59</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">60</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">61</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">62</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">63</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">64</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">65</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">66</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">67</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">68</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">69</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">70</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">71</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">72</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">73</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">74</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">75</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">76</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">77</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">78</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">79</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">80</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">81</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">82</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">83</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">84</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">85</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">86</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">87</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">88</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">89</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">90</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">91</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">92</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">93</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">94</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">95</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">96</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">97</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">98</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">99</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">101 </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><a name="crayon-58c68da40ebe4331145995-1"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">##############################################################################</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-2"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;"># Monit конфигурационный файл</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-3"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">##############################################################################</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-4"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;"># Запустить monit как депон и проверять процесс с интервалом 1 минута</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-5"></a><span style=" font-family:' FreeMono'; font-size:12px;">s</span><span style=" font-family:' FreeMono'; font-size:12px;">et daemon 60</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-6"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;"> Использовать syslog регистрирующий со средством 'демона'.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-7"></a><span style=" font-family:' FreeMono'; font-size:12px;">s</span><span style=" font-family:' FreeMono'; font-size:12px;">et logfile syslog facility log_daemon</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-8"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;"># Список mailservers для доставки оповещения.По умолчанию это 25 порт.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-9"></a><span style=" font-family:' FreeMono'; font-size:12px;">s</span><span style=" font-family:' FreeMono'; font-size:12px;">et mailserver localhost          # primary mailserver</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-10"></a><span style=" font-family:' FreeMono'; font-size:12px;">s</span><span style=" font-family:' FreeMono'; font-size:12px;">et eventqueue</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-11"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   basedir /var/log/monit     # путь к каталогу, где будут храниться оповещения</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-12"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   slots 100                  # лимит</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-13"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;"># Вы можете самостоятельно задать формат письма</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-14"></a><span style=" font-family:' FreeMono'; font-size:12px;">s</span><span style=" font-family:' FreeMono'; font-size:12px;">et mail-format { from: system-alert@host.com }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-15"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">set alert sis@host.com        # все оповещения</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-16"></a><span style=" font-family:' FreeMono'; font-size:12px;">s</span><span style=" font-family:' FreeMono'; font-size:12px;">et mmonit http://monit:password@IP:PORT/collector</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-17"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   set httpd port 2800 and</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-18"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   use address IP-SERVER</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-19"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   allow admin:admin</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-20"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">Состояние сервера в целом</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-21"></a><span style=" font-family:' FreeMono'; font-size:12px;">c</span><span style=" font-family:' FreeMono'; font-size:12px;">heck system serv.host.com</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-22"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   group server</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-23"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if loadavg (15min) &gt; 10 then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-24"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if loadavg (5min) &gt; 30 then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-25"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if memory usage &gt; 90% then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-26"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">Проверка apache2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-27"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   check process apache2 with pidfile /var/run/apache2.pid</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-28"></a><span style=" font-family:' FreeMono'; font-size:12px;">g</span><span style=" font-family:' FreeMono'; font-size:12px;">roup www</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-29"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   start program = &quot;/etc/init.d/apache2 start&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-30"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   stop program  = &quot;/etc/init.d/apache2 stop&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-31"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if cpu &gt; 50% for 3 cycles then alert       # если загрузка cpu &gt; 50% в течение 5 (проверок) послать предупреждение.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-32"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if cpu &gt; 90% for 3 cycles then restart            # если загрузка cpu &gt; 90% в течение 3 циклов то послать перезапустить процесс.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-33"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if totalmem &gt; 4000.0 MB for 3 cycles then restart # если юзается больше 600 MB мозгов то перезапустить процесс.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-34"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if children &gt; 200 then restart               # если число дочерних процессов &gt; 50 то перезапустить процесс.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-35"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if failed host IP_ADDR port 80 protocol HTTP then restart # передернуть если не отвечает.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-36"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if 5 restarts within 5 cycles then timeout                # если 5 раз уже перезапускали процесс то сделать timeout.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-37"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">Проверка nginx</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-38"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   check process nginx with pidfile /var/run/nginx.pid</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-39"></a><span style=" font-family:' FreeMono'; font-size:12px;">g</span><span style=" font-family:' FreeMono'; font-size:12px;">roup www</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-40"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   start program = &quot;/etc/init.d/nginx start&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-41"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   stop program  = &quot;/etc/init.d/nginx stop&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-42"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if cpu &gt; 50% for 3 cycles then alert     # если загрузка cpu &gt; 50% в течение 3 (проверок) послать предупреждение.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-43"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if cpu &gt; 90% for 5 cycles then restart          # если загрузка cpu &gt; 80% 6 циклов то послать перезапустить процесс.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-44"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if totalmem &gt; 1200.0 MB for 3 cycles then restart # если юзается больше 200 MB мозгов то перезапустить процесс.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-45"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if children &gt; 10 then restart             # если число дочерних процессов &gt; 5 то перезапустить процесс.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-46"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">Проверка dovecot</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-47"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   check process dovecot with pidfile /var/run/dovecot/master.pid</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-48"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   start program = &quot;/etc/init.d/dovecot start&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-49"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   stop program  = &quot;/etc/init.d/dovecot stop&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-50"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if cpu &gt; 50% for 3 cycles then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-51"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if cpu &gt; 90% for 5 cycles then restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-52"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if totalmem &gt; 400.0 MB for 5 cycles then restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-53"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if children &gt; 40 then restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-54"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if failed port 110 type TCP protocol POP then restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-55"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if 5 restarts within 5 cycles then timeout</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-56"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">Проверка exim</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-57"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   check process exim with pidfile /var/run/exim4/exim.pid</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-58"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   start program = &quot;/etc/init.d/exim4 start&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-59"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   stop program  = &quot;/etc/init.d/exim4 stop&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-60"></a><span style=" font-family:' FreeMono'; font-size:12px;">i</span><span style=" font-family:' FreeMono'; font-size:12px;">f cpu &gt; 50% for 3 cycles then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-61"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if cpu &gt; 90% for 5 cycles then restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-62"></a><span style=" font-family:' FreeMono'; font-size:12px;">i</span><span style=" font-family:' FreeMono'; font-size:12px;">f children &gt; 30 then restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-63"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   #if failed port 25 protocol smtp then restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-64"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if 5 restarts within 5 cycles then timeout</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-65"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">Проверка mysql</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-66"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   check process mysql with pidfile /var/run/mysqld/mysqld.pid</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-67"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   group www</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-68"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   start program = &quot;/etc/init.d/mysql start&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-69"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   stop program = &quot;/etc/init.d/mysql stop&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-70"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if failed unixsocket /var/run/mysqld/mysqld.sock then restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-71"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   #if failed host 127.0.0.1 port 3306 protocol mysql then restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-72"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if 5 restarts within 5 cycles then timeout</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-73"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">Проверка SSH</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-74"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   check process sshd with pidfile /var/run/sshd.pid</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-75"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   start program &quot;/etc/init.d/ssh start&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-76"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   stop program &quot;/etc/init.d/ssh stop&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-77"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if failed host IP_ADDR port 22 protocol ssh then restart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-78"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">   if 5 restarts within 5 cycles then timeout</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-79"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">Проверка fail2ban</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-80"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">   check process fail2ban with pidfile /var/run/fail2ban/fail2ban.pid</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-81"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">  start program = &quot;/etc/init.d/fail2ban start&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-82"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">   stop program = &quot;/etc/init.d/fail2ban stop&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-83"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">   if 5 restarts within 5 cycles then timeout</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-84"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;"> проверяем устройство по точке монтирования.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-85"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       check device rootfs with path /</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-86"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       if failed permission 755 then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-87"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       if space usage &gt; 90% for 5 times within 10 cycles then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-88"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       if inode usage &gt; 90% for 5 times within 10 cycles then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-89"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       group server</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-90"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;"> проверяем устройство по точке монтирования.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-91"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       check device varfs with path /var</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-92"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       if failed permission 0755 then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-93"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       if space usage &gt; 90% for 5 times within 10 cycles then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-94"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       if inode usage &gt; 90% for 5 times within 10 cycles then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-95"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       group server</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-96"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;"> проверяем устройство по точке монтирования.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-97"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       check device tmpfs with path /tmp</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-98"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       if failed permission 1777 then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-99"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       if space usage &gt; 90% for 5 times within 10 cycles then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-100"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       if inode usage &gt; 90% for 5 times within 10 cycles then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebe4331145995-101"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">       group server</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">А вот так можно проверять свои сервера по вебу: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:' FreeMono'; font-size:12px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">Shell </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">#host1 check host s3.dgrad-host.com with address host1.com group host if failed port 80 protocol http and request &quot;/status.php&quot; for 2 cycles then alert #host2 check host hit-host.net with address host2.com group host if failed port 80 protocol http and request &quot;/status.php&quot; for 2 cycles then alert </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:' FreeMono'; font-size:12px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:-19px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><span style=" font-family:' FreeMono'; font-size:12px;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">7</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">8 </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><a name="crayon-58c68da40ebec165745692-1"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">host1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebec165745692-2"></a><span style=" font-family:' FreeMono'; font-size:12px;">c</span><span style=" font-family:' FreeMono'; font-size:12px;">heck host s3.dgrad-host.com with address host1.com</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebec165745692-3"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">  group host</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebec165745692-4"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">  if failed port 80 protocol http and request &quot;/status.php&quot; for 2 cycles then alert</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebec165745692-5"></a><span style=" font-family:' FreeMono'; font-size:12px;">#</span><span style=" font-family:' FreeMono'; font-size:12px;">host2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebec165745692-6"></a><span style=" font-family:' FreeMono'; font-size:12px;">c</span><span style=" font-family:' FreeMono'; font-size:12px;">heck host hit-host.net with address host2.com</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebec165745692-7"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">  group host</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebec165745692-8"></a><span style=" font-family:' FreeMono'; font-size:12px;"> </span><span style=" font-family:' FreeMono'; font-size:12px;">  if failed port 80 protocol http and request &quot;/status.php&quot; for 2 cycles then alert</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">Аналогично но + поиск строки в ответе </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:' FreeMono'; font-size:12px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">Shell </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">check host host with address host3.com group host CONTENT != &quot;The page you are looking for is temporarily unavailable&quot; timeout 60 seconds 3 cycles then alert </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:' FreeMono'; font-size:12px;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:-19px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><span style=" font-family:' FreeMono'; font-size:12px;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono'; font-size:12px;">5 </span></p></td>
<td>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:15px;"><a name="crayon-58c68da40ebf1304693306-1"></a><span style=" font-family:' FreeMono'; font-size:12px;">c</span><span style=" font-family:' FreeMono'; font-size:12px;">heck host host with address host3.com</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebf1304693306-2"></a><span style=" font-family:' FreeMono'; font-size:12px;">g</span><span style=" font-family:' FreeMono'; font-size:12px;">roup host</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebf1304693306-3"></a><span style=" font-family:' FreeMono'; font-size:12px;">C</span><span style=" font-family:' FreeMono'; font-size:12px;">ONTENT !=  &quot;The page you are looking for is temporarily unavailable&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebf1304693306-4"></a><span style=" font-family:' FreeMono'; font-size:12px;">t</span><span style=" font-family:' FreeMono'; font-size:12px;">imeout 60 seconds 3 cycles</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crayon-58c68da40ebf1304693306-5"></a><span style=" font-family:' FreeMono'; font-size:12px;">t</span><span style=" font-family:' FreeMono'; font-size:12px;">hen alert</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:' FreeMono';">Внимание! Это только примеры, детальнее смотрите на оф сайте программы а конфигурируйте под свой сервер самостоятельно. Удачных установок </span><span style=" font-family:' FreeMono'; font-weight:600; color:#b5524a;">monit в Debian</span><span style=" font-family:' FreeMono';">! </span></p></body></html>