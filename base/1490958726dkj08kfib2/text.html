<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:22.4px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565; background-color:#ffffff;">Данный прием можно охарактеризовать, как &quot;грязный хак&quot;, но иногда он бывает чрезвычайно полезен. Например, когда изменить работу стороннего класса, который много где используется (в том числе, в библеотеках третьих лиц).</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:22.4px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565; background-color:#ffffff;">Итак, допустим нам необходимо изменить класс</span><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; font-size:14px; font-weight:296; color:#c7254e; background-color:#f9f2f4;">yii\db\ActiveRecord</span><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565;">, чтобы каждый его наследник имел определенное поведение. Для этого мы копируем его в директорию своего приложения (например, в</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; font-size:14px; font-weight:296; color:#c7254e; background-color:#f9f2f4;">@app/models/ActiveRecord.php</span><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565;">) и дописываем в него свою реализацию. Важно! Необходимо оставить старый</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; font-size:14px; font-weight:296; color:#c7254e; background-color:#f9f2f4;">namespace</span><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565;"> и название класса, иначе ничего работать не будет.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:22.4px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565; background-color:#ffffff;">Теперь, когда класс готов, необходимо заменить им базовый. Осуществляется это заменой значения по ключу в</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; font-size:14px; font-weight:296; color:#c7254e; background-color:#f9f2f4;">Yii::$classMap</span><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565;">.</span></p>
<p style=" margin-top:17px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#6ce26c;"><a name="highlighter_41961"></a><a href="https://dev-tips.ru/blog/post/pereopredelenie-klassov-v-yii2-cherez-avtoloader-yii-framework#"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; font-size:10px; color:#ffffff;">?</span></a></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="0" cellpadding="0">
<tr>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; font-size:14px; color:#afafaf; background-color:#ffffff;">1</span></pre></td>
<td bgcolor="#ffffff" style=" padding-left:0; padding-right:0; padding-top:0; padding-bottom:0;">
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; font-size:14px; color:#000000;">Yii::</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; font-size:14px; color:#aa7700;">$classMap</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; font-size:14px; color:#000000;">[</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; font-size:14px; color:#0000ff;">'yii\db\ActiveRecord'</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; font-size:14px; color:#000000;">] = </span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; font-size:14px; color:#0000ff;">'@app/models/ActiveRecord.php'</span><span style=" font-family:'Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace'; font-size:14px; color:#000000;">;</span></pre></td></tr></table>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:22.4px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565; background-color:#ffffff;">Данный код вы можете разместить где вам потребуется, но, как правило, его помещают во входной скрипт</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; font-size:14px; font-weight:296; color:#c7254e; background-color:#f9f2f4;">index.php</span><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565;">.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:22.4px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565; background-color:#ffffff;">Все готово! Данная возможность переопределения классов доступна благодаря автолоадеру</span><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565;"> </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,monospace'; font-size:14px; font-weight:296; color:#c7254e; background-color:#f9f2f4;">Yii</span><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565;">.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:22.4px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Arial,sans-serif'; font-size:14px; font-weight:296; color:#656565; background-color:#ffffff;">Использовать данный хак или нет - ваше решение, но знать о такой возможности не будет лишним.</span></p></body></html>