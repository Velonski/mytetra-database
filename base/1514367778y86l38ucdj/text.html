<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Once you have installed an OpenSSH server, </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-1"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">s</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">udo apt-get install openssh-server </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">you will need to configure it by editing the </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sshd_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> file in the </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">/etc/ssh</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> directory. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td bgcolor="#b0c4de">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image19605.png" /></p></td>
<td bgcolor="#b0c4de">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sshd_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> is the configuration file for the OpenSSH </span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-style:italic;">server</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">. </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">ssh_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> is the configuration file for the OpenSSH </span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-style:italic;">client</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">. Make sure not to get them mixed up.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">First, make a backup of your </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sshd_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> file by copying it to your home directory, or by making a read-only copy in </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">/etc/ssh</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> by doing: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-19"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">s</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">udo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.factory-defaults</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-2"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">s</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">udo chmod a-w /etc/ssh/sshd_config.factory-defaults</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Creating a read-only backup in </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">/etc/ssh</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> means you'll always be able to find a known-good configuration when you need it. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Once you've backed up your </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sshd_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> file, you can make changes with any text editor, for example; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-1-2"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">s</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">udo gedit /etc/ssh/sshd_config</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">runs the standard text editor in Ubuntu 12.04 or more recent. For older versions replace &quot;sudo&quot; with &quot;gksudo&quot;. Once you've made your changes (see the suggestions in the rest of this page), you can apply them by saving the file then doing: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-32"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">s</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">udo restart ssh</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">If you get the error, &quot;Unable to connect to Upstart&quot;, restart ssh with the following: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-38"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">s</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">udo systemctl restart ssh</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Configuring OpenSSH means striking a balance between security and ease-of-use. Ubuntu's default configuration tries to be as secure as possible without making it impossible to use in common use cases. This page discusses some changes you can make, and how they affect the balance between security and ease-of-use. When reading each section, you should decide what balance is right for your specific situation. </span></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="disable-password-authentication"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">D</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">isable Password Authentication</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Because a lot of people with SSH servers use weak passwords, many online attackers will look for an SSH server, then start guessing passwords at random. An attacker can try thousands of passwords in an hour, and guess even the strongest password given enough time. The recommended solution is to use </span><a href="https://help.ubuntu.com/community/SSH/OpenSSH/Keys"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">SSH keys</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> instead of passwords. To be as hard to guess as a normal SSH key, a password would have to contain 634 random letters and numbers. If you'll always be able to log in to your computer with an SSH key, you should disable password authentication altogether. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">If you disable password authentication, it will only be possible to connect from computers you have specifically approved. This massively improves your security, but makes it impossible for you to connect to your own computer from a friend's PC without pre-approving the PC, or from your own laptop when you accidentally delete your key. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-style:italic;">It's recommended to disable password authentication unless you have a specific reason not to.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">To disable password authentication, look for the following line in your </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sshd_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> file: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">#PasswordAuthentication yes</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">replace it with a line that looks like this: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">PasswordAuthentication no</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Once you have saved the file and </span><a href="http://www.cyberciti.biz/faq/howto-start-stop-ssh-server/"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">restarted your SSH server</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">, you shouldn't even be asked for a password when you log in. </span></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Forwarding"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">D</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">isable Forwarding</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">By default, you can tunnel network connections through an SSH session. For example, you could connect over the Internet to your PC, tunnel a </span><a href="https://help.ubuntu.com/community/VNC"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">remote desktop</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> connection, and access your desktop. This is known as &quot;port forwarding&quot;. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">By default, you can also tunnel specific graphical applications through an SSH session. For example, you could connect over the Internet to your PC and run </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">nautilus &quot;file://$HOME&quot;</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> to see your PC's home folder. This is known as &quot;X11 forwarding&quot;. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">While both of these are very useful, they also give more options to an attacker who has already guessed your password. Disabling these options gives you a little security, but not as much as you'd think. With access to a normal shell, a resourceful attacker can replicate both of these techniques and a specially-modified SSH client. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-style:italic;">It's only recommended to disable forwarding if you also use </span><a href="https://help.ubuntu.com/community/SSH/OpenSSH/Keys#keys-with-specific-commands"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-style:italic; text-decoration: underline; color:#0000ff;">SSH keys with specified commands</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">To disable forwarding, look for the following lines in your </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sshd_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">AllowTcpForwarding yes</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">X11Forwarding yes</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">and replace them with: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">AllowTcpForwarding no</span></p></td></tr></table>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">X11Forwarding no</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">If either of the above lines don't exist, just add the replacement to the bottom of the file. You can disable each of these independently if you prefer. </span></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Specify_Which_Accounts_Can_Use_SSH"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">S</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">pecify Which Accounts Can Use SSH</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">You can explicitly allow or deny access for certain users or groups. For example, if you have a family PC where most people have weak passwords, you might want to allow SSH access just for yourself. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Allowing or denying SSH access for specific users can significantly improve your security if users with poor security practices don't need SSH access. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-style:italic;">It's recommended to specify which accounts can use SSH if only a few users want (not) to use SSH.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">To allow only the users </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">Fred</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> and </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">Wilma</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> to connect to your computer, add the following line to the bottom of the </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sshd_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> file: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">AllowUsers Fred Wilma</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">To allow everyone except the users </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">Dino</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> and </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">Pebbles</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> to connect to your computer, add the following line to the bottom of the </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sshd_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> file: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">DenyUsers Dino Pebbles</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">It's possible to create very complex rules about who can use SSH - you can allow or deny specific groups of users, or users whose names match a specific pattern, or who are logging in from a specific location. For more details about how to create complex rules, see the </span><a href="http://manpages.ubuntu.com/manpages/hardy/man5/sshd_config.5.html"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">sshd_config man page</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Rate-limit_the_connections"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">R</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">ate-limit the connections</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">It's possible to limit the rate at which one IP address can establish new SSH connections by </span><a href="https://help.ubuntu.com/community/UFW"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">configuring the uncomplicated firewall</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> (ufw). If an IP address is tries to connect more than 10 times in 30 seconds, all the following attempts will fail since the connections will be DROPped. The rule is added to the firewall by running a single command: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-109"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">s</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">udo ufw limit ssh</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">On a single-user or low-powered system, such as a laptop, the number of total simultaneous pending (not yet authorized) login connections to the system can also be limited. This example will allow two pending connections. Between the third and tenth connection the system will start randomly dropping connections from 30% up to 100% at the tenth simultaneous connection. This should be set in </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sshd_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">MaxStartups 2:30:10</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">In a multi-user or server environment, these numbers should be set significantly higher depending on resources and demand to alleviate denial-of-access attacks. Setting a lower the login grace time (time to keep pending connections alive while waiting for authorization) can be a good idea as it frees up pending connections quicker but at the expense of convenience. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">LoginGraceTime 30</span></p></td></tr></table>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Logging"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">L</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">og More Information</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">By default, the OpenSSH server logs to the AUTH facility of syslog, at the INFO level. If you want to record more information - such as failed login attempts - you should increase the logging level to VERBOSE. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-style:italic;">It's recommended to log more information if you're curious about malicious SSH traffic.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">To increase the level, find the following line in your </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sshd_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">LogLevel INFO</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">and change it to this: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">LogLevel VERBOSE</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Now all the details of </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">ssh</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> login attempts will be saved in your </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">/var/log/auth.log</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> file. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">If you have started using a different port, or if you think your server is well-enough hidden not to need much security, you should increase your logging level and examine your </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">auth.log</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> file every so often. If you find a significant number of spurious login attempts, then your computer is under attack and you need more security. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Whatever security precautions you've taken, you might want to set the logging level to </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">VERBOSE</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> for a week, and see how much spurious traffic you get. It can be a sobering experience to see just how much your computer gets attacked. </span></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Display_a_Banner"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">D</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">isplay a Banner</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">If you want to try to scare novice attackers, it can be funny to display a banner containing legalese. This doesn't add any security, because anyone that's managed to break in won't care about a &quot;no trespassing&quot; sign--but it might give a bad guy a chuckle. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">To add a banner that will be displayed before authentication, find this line: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">#Banner /etc/issue.net</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">and replace it with: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">Banner /etc/issue.net</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">This will display the contents of the </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">/etc/issue.net</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> file, which you should edit to your taste. If you want to display the same banner to SSH users as to users logging in on a local console, replace the line with: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; font-weight:600;">Banner /etc/issue</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">To edit the banner itself try </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-1-6"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">s</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">udo gedit /etc/issue.net</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Here is an example for what you might put in an </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">issue</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> or </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">issue.net</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> file and you could just copy&amp;paste this in: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-165"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">*</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">**************************************************************************</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-2-1"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;"> </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">                           NOTICE TO USERS</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:8.25pt;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:8.25pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-5"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">T</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">his computer system is the private property of its owner, whether</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-6"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">i</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">ndividual, corporate or government.  It is for authorized use only.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-7"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">U</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sers (authorized or unauthorized) have no explicit or implicit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-8"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">e</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">xpectation of privacy.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:8.25pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-10"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">A</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">ny or all uses of this system and all files on this system may be</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-11"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">i</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">ntercepted, monitored, recorded, copied, audited, inspected, and</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-12"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">d</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">isclosed to your employer, to authorized site, government, and law</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-13"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">e</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">nforcement personnel, as well as authorized officials of government</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-14"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">a</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">gencies, both domestic and foreign.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:8.25pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-16"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">B</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">y using this system, the user consents to such interception, monitoring,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-17"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">r</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">ecording, copying, auditing, inspection, and disclosure at the</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-18"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">d</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">iscretion of such personnel or officials.  Unauthorized or improper use</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-19"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">o</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">f this system may result in civil and criminal penalties and</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-20"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">a</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">dministrative or disciplinary action, as appropriate. By continuing to</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-21"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">u</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">se this system you indicate your awareness of and consent to these terms</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-22"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">a</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">nd conditions of use. LOG OFF IMMEDIATELY if you do not agree to the</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-23"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">c</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">onditions stated in this warning.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:8.25pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-25"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">*</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">***************************************************************************</span></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Troubleshooting"></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">T</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:600;">roubleshooting</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Once you have finished editing </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sshd_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">, make sure to save your changes before restarting your SSH daemon. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">First, check that your SSH daemon is running: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-199"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">p</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">s -A | grep sshd</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">This command should produce a line like this: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-205"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">&lt;</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">some number&gt; ?        00:00:00 sshd</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">If there is no line, your SSH daemon is not running. If it is, you should next check that it's listening for incoming connections: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-211"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">s</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">udo ss -lnp | grep sshd</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">This command should produce a line that looks like one of these: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-217"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">0</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">  128  :::22  :::*  users:((&quot;sshd&quot;,16893,4))</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-2-2"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">0</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">  128   *:22   *:*  users:((&quot;sshd&quot;,16893,3))</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">If there is more than one line, in particular with a port number different than 22, then your SSH daemon is listening on more than one port - you might want to go back and delete some </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">Port</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> lines in your </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sshd_config</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">. If there are no lines, your SSH daemon is not listening on any ports, so you need to add at least one </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">Port</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> line. If the line specifies something other than &quot;*:22&quot; ([::]:22 is IPv6), then your SSH daemon is listening on a non-standard port or address, which you might want to fix. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Next, try logging in from your own computer: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-226"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">s</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">sh -v localhost</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">This will print a lot of debugging information, and will try to connect to your SSH server. You should be prompted to type your password, and you should get another command-line when you type your password in. If this works, then your SSH server is listening on the standard SSH port. If you have set your computer to listen on a non-standard port, then you will need to go back and comment out (or delete) a line in your configuration that reads </span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">Port 22</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">. Otherwise, your SSH server has been configured correctly. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">To leave the SSH command-line, type: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="line-234"></a><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">e</span><span style=" font-family:'Courier New,courier'; font-size:8.25pt;">xit</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">If you have a local network (such as a home or office network), next try logging in from one of the other computers on your network. If nothing happens, you might need to tell your computer's firewall to allow connections on port 22 (or from the non-standard port you chose earlier). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">Finally, try logging in from another computer elsewhere on the Internet - perhaps from work (if your computer is at home) or from home (if your computer is at your work). If you can't access your computer this way, you might need to tell your router's firewall to allow connections from port 22, and might also need to configure </span><a href="https://help.ubuntu.com/community/ServersBehindNAT"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; text-decoration: underline; color:#0000ff;">Network Address Translation</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">. </span></p></body></html>