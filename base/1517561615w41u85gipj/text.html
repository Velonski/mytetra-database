<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Что такое Vagrant?</span> Vagrant — это простой и удобный в использовании инструмент, позволяющий легко управлять виртуальными машинами из командной строки.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Vagrant из коробки поддерживает VirtualBox, Hyper-V, Docker, а также имеет возможность управлять другими типами машин, как например VMWare или Amazon EC2, с помощью других так называемых <a href="https://www.vagrantup.com/docs/providers"><span style=" text-decoration: underline; color:#0000ff;">провайдеров</span></a>.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В данной статье я покажу, как создать новое Vagrant-окружение, скачать, сконфигурировать и запустить виртуальную машину, как подключиться к ней по <span style=" font-family:'Courier New,courier';">SSH</span> и как затем остановить или полностью уничтожить ее.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Это руководство предполагает, что вы уже установили один из поддерживаемых виртуальных провайдеров, как например VirtualBox или Docker.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Дельный Совет:</span> Установите Docker в Ubuntu-16.04 и используйте его вместе с Vagrant! <a href="https://www.shellhacks.com/install-docker-ubuntu-16-04/ru/"><span style=" text-decoration: underline; color:#0000ff;">Читать далее →</span></a></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Установка Vagrant</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Скачайте и установить последнюю версию Vagrant из <a href="https://www.vagrantup.com/downloads.html"><span style=" text-decoration: underline; color:#0000ff;">официального источника</span></a>.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы убедиться в том, что Vagrant был успешно установлен — проверьте его версию:</p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant -v</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Vagrant 2.0.0</span></pre>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Vagrant Boxes</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Стандартные темплейты виртуальных машин в Vagrant называются боксами.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Список общедоступных боксов для Vagrant может быть найден на странице <a href="https://app.vagrantup.com/boxes/search"><span style=" text-decoration: underline; color:#0000ff;">поиска боксов</span></a>.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">VirtualBox ≠ VMWare:</span> Все Vagrant-боксы провайдеро-зависимые. Не все боксы доступны для всех провайдеров. Возможно, чтобы сузить область поиска, вам следует отсортировать результаты по тому провайдеру, который необходим именно вам.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Как только вы нашли образ который хотите использовать — создайте директорию в которой будет храниться ваш новый проект:</p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ mkdir -p vagrant-projects/tutorial</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ cd vagrant-projects/tutorial</span></pre>
<p style=" margin-top:8px; margin-bottom:-6px; margin-left:0px; margin-right:13px; -qt-block-indent:0; text-indent:0px;">Чтобы создать новое Vagrant-окружение внутри папки проекта — выполните <span style=" font-family:'Courier New,courier';">vagrant init &lt;boxpath&gt;</span>, где <span style=" font-family:'Courier New,courier';">&lt;boxpath&gt;</span> — название Vagrant-бокса.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Например, чтобы установить базовый образ Ubuntu-16.04, выполните:</p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant init ubuntu/xenial64</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Команда <span style=" font-family:'Courier New,courier';">vagrant init</span> в текущей директории создает файл <span style=" font-family:'Courier New,courier';">Vagrantfile</span>, в котором описывается тип необходимой для проекта машины, каким образом ее сконфигурировать и какие ресурсы выделить.</p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Vagrant Up</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запустите Vagrant-окружение:</p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant up</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Команда <span style=" font-family:'Courier New,courier';">vagrant up</span> создает, настраивает и запускает виртуальную машину исходя из параметров заданных в <span style=" font-family:'Courier New,courier';">Vagrantfile</span>.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При первом запуске она автоматически скачивает необходимый Vagrant-бокс из <a href="https://app.vagrantup.com/boxes/search"><span style=" text-decoration: underline; color:#0000ff;">репозитория</span></a> и выделяет соответствующие ресурсы для новой виртуальной машины.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Дельный Совет:</span> Каждый DevOps должен знать основы работы с Git. И вы можете освоить их прямо сейчас! <a href="https://www.shellhacks.com/ru/git-basic-workflow/"><span style=" text-decoration: underline; color:#0000ff;">Читать далее →</span></a></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Vagrant SSH</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы подключиться по <span style=" font-family:'Courier New,courier';">SSH</span> к запущенной Vagrant-машине и попасть в консоль, выполните:</p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant ssh</span></pre>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Очистка Vagrant</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если необходимо приостановить процесс разработки — вы можете полностью остановить Vagrant-машину либо просто приостановить ее.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Остановить Vagrant-машину:</p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant halt</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Приостановить машину (запомнить состояние):</p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant suspend</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы полностью очистить окружение — вы можете уничтожить машину.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Остановить и удалить все следы Vagrant-машины:</p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant destroy</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Когда вам снова понадобиться чистое Vagrant-окружение на основе стандартного темплейта — просто выполнитье <span style=" font-family:'Courier New,courier';">vagrant up</span>.</p></body></html>