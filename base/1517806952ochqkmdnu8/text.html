<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Существует ряд правил, которые стоит соблюдать, чтобы увеличить скорость работы приложений на PHP. Правила простые и не потребуют значительных изменений в существующих приложениях.</span></p>
<p style=" margin-top:40px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:60px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Fastcgi</span><img src="image19849.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">FastCGI — это один из вариантов подключения PHP к Web серверу. Лучше всего использовать в связке с Nginx. PHP-fpm (Fastcgi контейнер для PHP) и Nginx по умолчанию поддерживают совместную работу и очень</span><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;"> </span><a href="http://help.ubuntu.ru/wiki/nginx-phpfpm"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; text-decoration: underline; color:#e85f63;">легко настраиваются</span></a><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;">.</span></p>
<p style=" margin-top:40px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:60px; background-color:#ffffff;"><a name="opcache"></a><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">O</span><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">pCache</span><img src="image11860.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Как обычно выполняется PHP скрипт? PHP открывает файл с кодом, компилирует его, затем выполняет. Поскольку файлов может быть много, процесс их открытия, чтения и компиляции может отнимать кучу ресурсов. Если файлы не меняются, то постоянную компиляцию можно и не делать. Лучше сделать ее один раз и закэшировать результат.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Именно это и делает модуль opCache. Результат первой компиляции будет сохранен в кэш, с которым и будет работать PHP. Таким образом это ускорит выполнение за счет отсутствия тяжелого процесса компиляции. Когда файлы изменятся, модуль сам сбросит кэш и обеспечит перекомпиляцию. Короче, этот модуль делает очень полезную экономию ресурсов. И это без необходимости его настраивать.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">В версии PHP5.5+ этот модуль поставляется в стандартной сборке. В предыдущих версиях модуль нужно устанавливать самостоятельно. Проверить наличие можно так:</span></p>
<p style=" margin-top:20px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa; background-color:#212529;">php -i | grep opcache</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#888888; background-color:#ffffff;"># Пустой вывод будет означать, что модуля нет</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Если версия слишком ранняя, лучше использовать APC:</span></p>
<p style=" margin-top:20px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa; background-color:#212529;">apt-cache search php-apc</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#888888; background-color:#ffffff;"># Это альтернатива opCache, но делает то же самое</span></p>
<p style=" margin-top:40px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:60px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Кэширование</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Часто код просто медленный. Например:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:20px;">обращения к внешним API</span></li>
<li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:20px;">тяжелые выборки из баз данных</span></li>
<li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:20px;">обработка больших файлов</span></li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">В этом случае,</span><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;"> </span><a href="https://ruhighload.com/post/%D0%9A%D1%8D%D1%88%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5+%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; text-decoration: underline; color:#e85f63;">кэширование данных</span></a><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;"> следует использовать как средство оптимизации.</span><img src="image25182.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Для PHP наиболее популярным решением для кэширования является</span><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;"> </span><a href="https://ruhighload.com/index.php/2009/12/02/keshyrovanie-tyajelyh-zaprosov-memcache/"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; text-decoration: underline; color:#e85f63;">Memcache</span></a><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;">. Очень простой в использовании и очень быстрый, т.к. поддерживает только самое необходимое.</span></p>
<p style=" margin-top:40px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:60px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">PHP.ini</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Если Вы только установили PHP, убедитесь, что Вы настроили наиболее важные параметры под Ваш сайт. Это также может сэкономить ресурсы:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:12px; font-weight:600; background-color:#eeeeee;">memory_limit = 32M</span><span style=" font-size:20px;"> — не стоит устанавливать этот параметр слишком большим. Увеличивайте его только в крайних случаях.</span></li>
<li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:12px; font-weight:600; background-color:#eeeeee;">zlib.output_compression = Off</span><span style=" font-size:20px;">, </span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:12px; font-weight:600; background-color:#eeeeee;">zlib.output_compression_level = -1</span><span style=" font-size:20px;"> — </span><a href="https://ruhighload.com/post/%D0%A1%D0%B6%D0%B0%D1%82%D0%B8%D0%B5+%D0%B8+%D0%BC%D0%B8%D0%BD%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F+%D1%81%D1%82%D0%B0%D1%82%D0%B8%D0%BA%D0%B8"><span style=" font-size:20px; text-decoration: underline; color:#e85f63;">компрессию</span></a><span style=" font-size:20px;">лучше использовать на стороне Web сервера.</span></li>
<li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:12px; font-weight:600; background-color:#eeeeee;">max_execution_time = 5</span><span style=" font-size:20px;"> — максимальное время работы скрипта не должно быть больше 5 секунд. Увеличивайте только в крайних случаях.</span></li>
<li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:12px; font-weight:600; background-color:#eeeeee;">zend.enable_gc = On</span><span style=" font-size:20px;"> — включает сборщик мусора (будет оптимизировать память на фоне).</span></li>
<li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:12px; font-weight:600; background-color:#eeeeee;">expose_php = Off</span><span style=" font-size:20px;"> — PHP не будет отправлять свою версию вместе с ответом.</span></li>
<li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:12px; font-weight:600; background-color:#eeeeee;">report_memleaks = On</span><span style=" font-size:20px;"> — будет отправлять в лог ошибок информацию об обнаруженных утечках памяти.</span></li>
<li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:12px; font-weight:600; background-color:#eeeeee;">post_max_size = 4M</span><span style=" font-size:20px;">, </span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:12px; font-weight:600; background-color:#eeeeee;">upload_max_filesize = 4M</span><span style=" font-size:20px;"> — настройте максимальный размер запросов и файлов для загрузки. Защитит от обработки громадных запросов, которых не должно быть в приложении.</span></li></ul>
<p style=" margin-top:40px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:60px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Сессии</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">По умолчанию, PHP хранит сессии в файлах. Это довольно эффективное решение. Но когда файлов становится очень много (десятки тысяч), работа с ними будет замедляться в рамках одной папки (особенности файловых систем). В этом случае лучше перенести сессии на Memcache (php.ini):</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">session.save_handler = memcache </span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">session.save_path = &quot;tcp://</span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">localhost:11211</span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#888888; background-color:#ffffff;"># localhost:11211 это стандартный хост и порт Memcache</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Кроме этого, такая схема хранения позволит масштабироваться на несколько серверов.</span></p>
<p style=" margin-top:40px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:60px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Оптимизация кода</span></p>
<p style=" margin-top:40px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:51px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#333333; background-color:#ffffff;">ООП</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;">Помните! ООП — это всегда медленно. Объекты нужно создавать, где-то хранить и уничтожать. Не используйте объекты, если они не нужны. Например, тут:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">$post = new Post();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">$post-&gt;set_title($_GET['title']);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">$post-&gt;set_description($_GET['description']);</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">$post-&gt;save();</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#888888; background-color:#ffffff;"># Создаем объект только для того, чтобы сохранить данные в БД</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">или тут:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa; background-color:#212529;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;"># $posts = список объектов Post, полученных каким-то образом</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">foreach ( $posts as $post )</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	echo $post-&gt;title . '&lt;br/&gt;';</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">}</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#888888; background-color:#ffffff;"># Используем список объектов только для того, чтобы вывести свойство</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">В этих примерах использование ООП не имеет особого смысла. Зато расходует ресурсы. Старайтесь использовать массивы, когда объекты не нужны:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">mysql::insert(['title' =&gt; $_GET['title'], 'description' =&gt; $_GET['description']]);</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#888888; background-color:#ffffff;"># Избежали создания объекта, функция просто сохраняет данные из массива в базу</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">или тут:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">$posts = mysql::query('SELECT title FROM posts');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">foreach ( $posts as $post )</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	echo $post['title'] . '&lt;br/&gt;';</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">}</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#888888; background-color:#ffffff;"># Намного лучше — сделать простую выборку и вывести нужные данные из массива</span></p>
<p style=" margin-top:40px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:51px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#333333; background-color:#ffffff;">Мелочи</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">При работе с файлами используйте абсолютные пути. Тогда не будут происходить лишние операции поиска файла:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">include 'file.php';</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">file_get_contents('dir/data.txt');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">include '/var/www/file.php';</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">file_get_contents('/var/www/dir/data.txt');</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Константы классов работают эффективнее, чем define:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">define('MAX_POSTS_PER_PAGE', 10);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">class posts {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">	const PER_PAGE = 10;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">	...</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">}</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Не используйте функции в условии for, т.к. они будут повторяться на каждой итерации цикла:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">for ( $i = 0; $i &lt; mysql::get_col('SELECT count(*) FROM posts'); $i++ )</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa; background-color:#212529;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">$max = mysql::get_col('SELECT count(*) FROM posts');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">for ( $i = 0; $i &lt; $max; $i++ )</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">...</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">}</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">В качестве ключей массивов всегда указывайте строки</span><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;"> </span><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; font-weight:600; color:#212529;">с кавычками</span><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;">:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">$post[title] = 'Первый пост';</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">$post['title'] = 'Первый пост';</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Используйте встроенные функции работы со строками вместо регулярных выражений, если это возможно.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">preg_match('/хорошо/ui', $post['title']);</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">strpos($post['title'], 'хорошо');</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Используйте строки с одинарными кавычками:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">$post[&quot;title&quot;] = &quot;Почему?&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">$post['title'] = 'В этом случае нет дополнительной обработки переменных'</span></p>
<p style=" margin-top:40px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:60px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">PHP cron-скрипты</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Когда PHP используется для разработки скрипта, который будет выполняться по крону, следует избегать использования глобальных переменных. Например:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">while ( true )</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	$rss = file_get_contents('http://somesite.com/rss');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	preg_match_all('/title&gt;(.+?)&lt;\/title/', $rss, </span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">$matches</span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">);</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">}</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Переменная</span><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;"> </span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#212529; background-color:#eeeeee;">$matches</span><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;"> передается по ссылке. Это значит, что с каждым новым повторением, она будет расти. Другой частый пример, это просто использование общего массива:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">while ( true )</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	$rss = file_get_contents('http://somesite.com/rss');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	$has_something = preg_match('/title&gt;(.+?)&lt;\/title/', $rss);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	if ( $has_something ) </span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">$updates</span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">[] = time();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa; background-color:#212529;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	$rss = file_get_contents('http://othersource.com/rss');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	$has_something = preg_match('/title&gt;(.+?)&lt;\/title/', $rss);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	if ( $has_something ) </span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">$updates</span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">[] = time();</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">}</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Теперь переменная</span><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;"> </span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#212529; background-color:#eeeeee;">$updates</span><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;"> будет расти до максимального предела. Когда будет достигнут лимит по памяти, скрипт будет остановлен. Уследить за всеми переменными довольно тяжело, поэтому лучше использовать функции. Все переменные, созданные внутри функции будут удаляться после ее завершения:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">&lt;?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">while ( true ) </span><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f;">process();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; font-weight:600; color:#adff2f; background-color:#212529;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">function process()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	$rss = file_get_contents('http://somesite.com/rss');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	$has_something = preg_match('/title&gt;(.+?)&lt;\/title/', $rss);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	if ( $has_something ) $updates[] = time();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa; background-color:#212529;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	$rss = file_get_contents('http://othersource.com/rss');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	$has_something = preg_match('/title&gt;(.+?)&lt;\/title/', $rss);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">	if ( $has_something ) $updates[] = time();</span></p>
<p style=" margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px; background-color:#212529;"><span style=" font-family:'Monaco,Courier New,Courier,mono'; font-size:8.25pt; color:#aaaaaa;">}</span></p>
<p style=" margin-top:40px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:60px; background-color:#ffffff;"><span style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529; background-color:#ffffff;">Самое важное</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:20px;">Обязательно используйте opCache для PHP. Это </span><span style=" font-size:20px; font-weight:600;">бесплатно</span><span style=" font-size:20px;"> экономит ресурсы.</span></li>
<li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:20px;">Используйте FastCGI (лучше всего Nginx + PHP-fpm).</span></li>
<li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:20px;">Функции в крон задачах помогут избежать утечек памяти.</span></li>
<li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:20px;">Кэширование медленных участков кода часто самое простое решение для ускорения работы.</span></li>
<li style=" font-family:'Georgia,Cambria,Times New Roman,Times,serif'; font-size:8.25pt; color:#212529;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:20px;">Помните о </span><a href="https://ruhighload.com/post/%D0%A7%D0%B5%D0%BA%D0%BB%D0%B8%D1%81%D1%82+%D0%BF%D0%BE+%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8+PHP"><span style=" font-size:20px; text-decoration: underline; color:#e85f63;">важных мелочах</span></a><span style=" font-size:20px;">.</span></li></ul></body></html>